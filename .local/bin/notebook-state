#!/bin/bash
# dependencies:
#   libnotify-id (aur)
#   dunst (community)
#   acpilight (community)
#   libpulse (extra)
#   xorg-xset (extra)
#   otf-font-awesome

time=800
case $1 in
    [cC]aps_[lL]ock )
		state="$(sleep 0.25; xset q | grep "Caps Lock" | awk -F" " '{print $4}')"
		notify-send -t $time -r 100 " Caps Lock $state"
		;;
    [nN]um_[lL]ock )
		state="$(sleep 0.25; xset q | grep "Num Lock" | awk -F" " '{print $8}')"
		notify-send -t $time -r 100 " Num Lock $state"
		;;
	[sS]creen_[oO]ff )
		sleep 0.25 && xset dpms force off
		;;
    [tT]oggle_[aA]uto[lL]ock )
		state="$(xset q | grep "DPMS is" | awk -F" " '{print $3}')"
		if [ $state = "Enabled" ]
		then
			xautolock -disable
			xset s off -dpms
			notify-send -t $time -r 200 " Screen Auto Lock Disabled"
		else
			xautolock -enable
			xset s on +dpms
			notify-send -t $time -r 200 " Screen Auto Lock Enabled"
		fi;;
	[bB]acklight_[uU]p )
		xbacklight -inc 2
		notify-send -t $time -r 300 " Backlight $(xbacklight -get)%";;
	[bB]acklight_[dD]own )
		xbacklight -dec 2
		notify-send -t $time -r 300 " Backlight $(xbacklight -get)%";;
	[vV]olume_[uU]p )
		pactl set-sink-volume 0 +5%
		volume="$(pactl list sinks | grep '^[[:space:]]Volume:' | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,')"
		notify-send -t $time -r 400 " Volume $volume%";;
	[vV]olume_[dD]own )
		pactl set-sink-volume 0 -5%
		volume="$(pactl list sinks | grep '^[[:space:]]Volume:' | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,')"
		notify-send -t $time -r 400 " Volume $volume%";;
	[mM]ute )
		pactl set-sink-mute 0 toggle
		mute="$(pactl list sinks | grep 'Mute:' | awk -F" " '{print $2}')"
		if [ $mute = "yes" ]
		then
			notify-send -t $time -r 500 " Volume muted"
		else
			volume="$(pactl list sinks | grep '^[[:space:]]Volume:' | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,')"
			notify-send -t $time -r 500 " Volume $volume%"
		fi;;
	* )
		echo "Opciones disponibles: caps_lock, num_lock, toggle_autolock, backlight_up, backlight_down, volume_up, volume_down, mute.";;
esac
